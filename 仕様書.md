# やみなべっ！キャラクターアーカイブサイト - 仕様書

---

## 1. プロジェクト名
**やみなべっ！キャラクターアーカイブサイト**

サイト正式名称：「やみなべ - 混沌の円卓へようこそ」

---

## 2. 目的（Why）
### プロジェクトの目的
- **2025年度の課題として提出するためのキャラクターアーカイブサイト作成**
- 自分のオリジナルキャラクター（クトゥルフ神話TRPGの通りすがり探索者たち）をまとめ、閲覧・提示できるようにする
- セッションで生まれたキャラクターたちの冒険と軌跡を記録し、共有するためのファンサイト
- セッションで生まれたキャラクターたちの魅力、忘れられないシーン、物語をより多くの人と分かち合う
- 個人のポートフォリオとしての活用
- キャラクター資料の整理・公開

### ゴール
- 探索者のプロフィール、ルームログ、ギャラリーなどを通じて、やみなべの仲間たちの世界を楽しめる場所を提供する
- キャラクターの成長や変化を時系列で追えるようにする
- 視覚的に魅力的で使いやすいUIを提供する
- 課題として評価者に提出し、評価を得る

---

## 3. 対象ユーザー（Who）
### 主な利用者
- **作成者（自分）**: キャラクター資料の管理・閲覧
- **評価者（課題の審査員）**: 課題提出、ポートフォリオ評価
- **一般閲覧者**: TRPGファン、キャラクター設定に興味がある人
- **セッション仲間**: 共通の思い出を振り返る

### 想定年齢層
- 10代後半〜30代（TRPGプレイヤー層）

### 利用シーン
- キャラクター情報の確認
- セッション前後の設定確認
- ギャラリーでのイラスト閲覧
- ルームログの振り返り
- ポートフォリオとしての提示
- 課題評価のための閲覧

---

## 4. 範囲（スコープ／What）
### サイトで提供する主要なページ・機能（MVP = 最小限の機能）

#### 含めるもの（必須機能）
- **トップページ** (`/`)
  - サイト案内・紹介
  - 目立つキャラクター表示（ランダムに3人）
  - メインビジュアルとロゴ表示
  
- **キャラクター一覧ページ** (`/characters`)
  - カード型で各キャラ表示
  - サムネイル（立ち絵1枚）、名前、短いステータス（年齢・職業など）
  - カードクリックで個別ページへ遷移
  
- **キャラクター個別ページ** (`/characters/[id]`)
  - 立ち絵（複数、切り替え可能）
  - 表情差分（あれば表示）
  - 名前、キャッチコピー・一言紹介
  - ステータス（身長、体重、誕生日、性別、職業など任意）
  - 好きなもの／苦手なもの／特技
  - シナリオ履歴（ログ形式、時系列）
  - 関連キャラクター（リンクで相互遷移）
  - 豆知識・補足（アコーディオンや「もっと見る」で展開）
  
- **ギャラリーページ** (`/gallery`)
  - キャラのイラストをまとめて見る
  - グリッド表示
  - 各画像クリックで拡大モーダル表示
  
- **サーチページ** (`/search`)
  - 名前検索による簡易検索（部分一致）
  - 検索窓でフリーワード検索
  - 結果一覧はカード形式で表示
  - 並べ替え機能（登録順、名前順、誕生日順、年齢順）
  - 絞り込み機能（性別、職業、年齢、誕生月）
  
- **アバウトページ** (`/about`)
  - サイト説明・制作情報
  - クトゥルフ神話TRPGの解説
  - アコーディオン形式での情報展開
  
- **ログページ** (`/line-log`)
  - シナリオ履歴など時系列で見られるページ
  - 新着順で表示
  - 各ログはキャラページやギャラリーへリンク

- **共通コンポーネント**
  - サイドバーナビゲーション（左側、PC常時表示）
  - スマホではハンバーガーメニューに切替
  - フッター
  - スクロールトップボタン


#### 含めないもの（将来的に追加可能）
- **管理画面**（ブラウザでデータ・画像を追加編集できる簡易CMS）
- **詳細な絞り込み/タグ検索**（性別・職業・タグなど）
- **詳細なフルテキスト検索**
- **ユーザー認証**（編集権限管理）
- **お気に入り機能**
- **コメント機能**
- **キャラクター間の相関図**
- **印刷用PDF出力**
- **作品ごとのバージョン管理（履歴）**
- **多言語対応**
- **ダークモード**

---

## 5. 画面一覧（画面ごとの仕様）

### 5.1 トップページ (`/`)
**目的**: サイトの顔として訪問者を迎え入れる

**表示要素**:
- メインビジュアル画像
- サイトタイトル「ようこそ、混沌の円卓へ。」
- サイト説明文
- サイトロゴ
- 目立つキャラクター（ランダムに選ばれた3人のキャラクターカード）
  - サムネイル画像
  - キャラクター名
  - キャッチコピー
  - 「詳細を見る」リンク

**画面遷移**:
- 各キャラクターカード → キャラクター詳細ページ
- サイドバーから各ページへ遷移可能

---

### 5.2 キャラクター一覧ページ (`/characters`)
**目的**: 全キャラクターを一覧で表示

**表示要素**:
- ページタイトル「Characters」
- キャラクターカードのグリッド表示
  - サムネイル（立ち絵1枚、円形）
  - 名前
  - 短いステータス（年齢・職業など）
  - キャッチコピー
  - 「詳細を見る」リンク

**操作**:
- カードクリックで個別ページへ遷移

**画面遷移**:
- 各キャラクターカード → キャラクター詳細ページ



### 5.3 キャラクター詳細ページ (`/characters/[id]`)
**目的**: 個別キャラクターの詳細情報を表示

**表示要素**:
- キャラクター名（必須）
- キャッチコピー・一言紹介
- 立ち絵（複数、切り替え可能）
- 表情差分（あれば表示、クリックで切り替え可能）
- 基本情報（ステータス）
  - 性別
  - 職業
  - 誕生日
  - 年齢
  - 身長・体重
  - 一人称
- 説明文
- 好きなもの・苦手なもの
- 特技
- ステータス（レーダーチャート）：STR, CON, POW, DEX, APP, SIZ, INT
- シナリオ履歴（ログ形式、時系列）
- 登場作品
- 豆知識・裏話・補足（アコーディオンや「もっと見る」で展開）
- 関連キャラクター（リンクで相互遷移）
- ルームログへのリンク（該当する場合）

**画面遷移**:
- 関連キャラクター → 他のキャラクター詳細ページ
- ルームログリンク → ログページ

**UI**:
- 左側にサイドバーがあり、主要ナビゲーションを常時表示（PC）


### 5.4 ギャラリーページ (`/gallery`)
**目的**: イラストや画像をグリッド形式で閲覧

**表示要素**:
- ページタイトル「Gallery」
- すべてのイラストをグリッド表示（サムネイル）
  - ホバー時に画像タイトル表示
  - ホバー時にズームエフェクト
- クリックで拡大モーダル表示
  - 拡大画像
  - 画像説明文
  - 閉じるボタン（×）

**操作**:
- 画像クリック → モーダル表示
- モーダル外クリック or ×ボタン → モーダル閉じる

---

### 5.5 サーチページ (`/search`)
**目的**: キャラクターの検索・絞り込み・並べ替え

**表示要素**:
- ページタイトル「Search」
- 検索窓（フリーワード検索：名前による簡易検索、部分一致）
- 並べ替えボタン
  - モーダルで選択肢表示（登録順、名前順、誕生日順、年齢順）
- 絞り込みボタン
  - 性別
  - 職業
  - 年齢
  - 誕生月
  - 各ボタンクリックでモーダル表示
- 検索結果のキャラクターカード表示（グリッド、カード形式）
- 結果0件時のメッセージ

**操作**:
- 検索窓入力 → リアルタイムで結果更新
- 並べ替えボタン → モーダルで選択
- 絞り込みボタン → モーダルで条件選択
- 選択解除ボタンで条件クリア

**画面遷移**:
- キャラクターカード → キャラクター詳細ページ

---

### 5.6 アバウトページ (`/about`)
**目的**: サイトとクトゥルフ神話TRPGの説明

**表示要素**:
- ページタイトル「About」
- アコーディオン形式の説明セクション
  - このサイトについて
  - クトゥルフ神話TRPGとは
  - 基本構造
  - キャラクターと基礎能力（ステータス）
  - 正気度（SAN）と物語への影響
  - 探索者とは
  - シナリオとは

**操作**:
- 各セクションをクリック → 展開/折りたたみ

---

### 5.7 ログページ (`/line-log`)
**目的**: セッションログの閲覧、シナリオ履歴や更新履歴を時系列で表示

**表示要素**:
- ページタイトル「LINE Log」
- ログ一覧（キャラクター別、エピソード別、新着順）
- 各ログ項目
  - 日付
  - タイトル
  - 簡単な説明
- ログへのリンク

**画面遷移**:
- ログリンク → ログ詳細ページ（HTMLファイル表示）
- キャラページへのリンク
- ギャラリーへのリンク

---

### 5.8 共通コンポーネント

#### サイドバー（左側）
- ロゴ
- ナビゲーションメニュー
  - Home
  - Characters
  - Gallery
  - Search
  - About
  - LINE Log
- 固定表示（PC）
- スマホではハンバーガーメニューに切替

#### フッター
- コピーライト表記
- サイト情報
- 制作者情報

#### スクロールトップボタン
- 画面下部にスクロールすると表示
- クリックでページトップへスムーズスクロール

---

## 6. 機能仕様（機能ごとの詳細）

### 6.1 検索機能
- **検索対象**: キャラクター名、キャッチコピー、説明文
- **検索方式**: 部分一致検索（大文字小文字区別なし）
- **リアルタイム検索**: 入力と同時に結果更新

### 6.2 絞り込み機能
- **絞り込み項目**:
  - 性別（男性、女性、その他、不明）
  - 職業（俳優、ミュージシャン、ハルモロイド、小学生、高校生）
  - 年齢（10代、20代、30代、40代以上、不明）
  - 誕生月（1月〜12月）
- **動作**: モーダルで選択、複数条件の組み合わせ可能
- **選択解除**: 各項目ごとに選択解除ボタン

### 6.3 並べ替え機能
- **並べ替え項目**:
  - 登録順（デフォルト）
  - 名前順（五十音順）
  - 誕生日順（月日順、未設定は最後）
  - 年齢順（昇順、不明は最後）

### 6.4 画像表示機能（ギャラリー）
- **サムネイル表示**: グリッドレイアウト
- **拡大表示**: モーダルで元画像表示
- **ホバーエフェクト**: 画像拡大アニメーション、説明文表示

### 6.5 表情差分表示（キャラクター詳細）
- **複数画像の切り替え**: クリックで表情変更
- **表情名表示**: 各表情の名前を表示

### 6.6 レーダーチャート表示
- **ステータス可視化**: STR, CON, POW, DEX, APP, SIZ, INTの7項目
- **カスタムコンポーネント使用**: RadarChart.tsx

### 6.7 スクロールトップボタン
- **表示条件**: スクロール量が一定以上
- **動作**: クリックでページトップへスムーズスクロール

### 6.8 ランダム表示（トップページ）
- **対象**: 全キャラクターから3人をランダム抽出
- **更新タイミング**: ページロード時

### 6.9 初回訪問時のローディングアニメーション
- **表示条件**: 初回訪問時、またはリロード時
- **アニメーション内容**: ウェルカムメッセージ、ロゴ表示
- **LocalStorageで管理**: 2回目以降は即座にコンテンツ表示

### 6.10 レスポンシブ対応
- **ブレークポイント**: PC (>=1024px)、タブレット (768–1023px)、スマホ (<768px)
- **サイドバー**: PCで常時表示、スマホで折りたたみハンバーガーメニュー
- **画像**: 幅100%で縮小可能

---

## 7. データ設計（何を保存するか）

### 7.1 データ保存方法
#### 当面の保存方法（現在）
- **形式**: TypeScriptファイル（`.ts`）にデータを直接記述
- **場所**: `/data/characters.ts`, `/data/galleryImages.ts`
- **理由**: 更新頻度が低く、管理画面が未導入のためシンプルで確実
- **管理方法**: 手動でファイル編集（コード編集による管理）

#### 推奨される移行先（将来）
- **JSON形式**: GitHub リポジトリ内の JSON ファイル（`/data/characters.json`）
- **外部データベース/CMS**: Supabase（Postgres）、Firebase、Sanity、Contentful等
- **理由**: 編集の簡便化、管理画面導入時の拡張性

### 7.2 主要データモデル

#### Character（キャラクター）
```typescript
interface Character {
  id: string;                    // 一意な識別子（例: 'char001', 'yam01'）
  name: string;                  // キャラクター名（必須）
  catchphrase: string;           // キャッチコピー
  description: string;           // 説明文
  image?: string;                // 全身立ち絵のパス
  thumbnail?: string;            // サムネイル画像のパス
  images?: string[];             // 配列（立ち絵、顔差分、ギャラリー画像のパス）
  gender?: '男性' | '女性' | '不明' | 'その他';
  occupation?: string;           // 職業
  birthday?: string;             // 誕生日（'MM/DD'形式）
  age?: number | '不明';         // 年齢
  colorcode?: string[];          // カラーコード（配列）
  height?: string;               // 身長（例: '176cm'）
  weight?: string;               // 体重（例: '62kg'）
  likes?: string[];              // 好きなもの（配列）
  dislikes?: string[];           // 苦手なもの（配列）
  specialSkill?: string[];       // 特技（配列）
  skills?: string[];             // 技能（配列）
  quirk?: string;                // 一人称
  origin?: string;               // 出身地・生い立ち
  relatedCharacters?: string[];  // 関連キャラクターのID（配列）
  related_ids?: string[];        // 関連キャラIDの配列（代替名）
  appearingWorks?: string[];     // 登場作品（配列）
  trivia?: string;               // 豆知識・裏話
  history?: {                    // 時系列の配列
    date: string;                // 日付
    title: string;               // タイトル
    content: string;             // 内容
  }[];
  expressions?: {                // 表情差分（配列）
    name: string;                // 表情名
    src: string;                 // 画像パス
  }[];
  stats?: {                      // ステータス（配列）
    label: string;               // ステータス名（例: 'STR'）
    value: number;               // 値（0-10）
  }[];
  created_at?: string;           // 作成日時
  updated_at?: string;           // 更新日時
}
```

#### GalleryImage（ギャラリー画像）
```typescript
interface GalleryImage {
  id: string;        // 画像ID（例: 'gal001'）
  src: string;       // 画像のパス
  alt: string;       // 画像の説明文
  width: number;     // 画像の幅（ピクセル）
  height: number;    // 画像の高さ（ピクセル）
}
```

### 7.3 画像の保存場所
- **ディレクトリ**: `/public/images/`, `/public/gallery/`
- **構造**:
  - `/public/images/[キャラクター名]/` - キャラクターごとのフォルダ
    - 表情差分、全身立ち絵などを格納
  - `/public/gallery/` - ギャラリー用画像
  - `/public/line-logs/[キャラクター名]/` - LINEログのHTMLファイル
  - `/public/rogo/` - ロゴ画像
- **将来的な選択肢**: Cloudinary、AWS S3等の画像ホスティングサービス

---

## 8. 非機能要件（How well）

### 8.1 パフォーマンス
- **初回ロード時間**: 3秒以内（目安）
- **画像最適化**: Next.jsの`Image`コンポーネントを使用
- **遅延読み込み**: 画像の遅延ロード対応
- **ビルド最適化**: Next.jsの静的最適化を活用

### 8.2 セキュリティ・著作権
#### セキュリティ
- **現時点での考慮事項**:
  - ユーザー入力を受け付けるのは検索窓のみ
  - XSS対策はReactのデフォルト機能で対応
  - 画像アップロード機能なし（手動管理）
- **将来的な考慮**:
  - 管理画面を追加する場合は認証機能が必要
  - 画像アップロード機能を入れる場合は、アップロードファイルの種類チェック（拡張子、MIME）を実装すること

#### 著作権
- **すべて自作素材のため権利問題はなし**
- **公開時の二次利用について**: READMEやサイトに利用規約を簡単に書くと安心
- **注意事項**: 将来的に他者の素材を使用する場合は、適切なクレジット表記と利用許諾の確認が必要

### 8.3 可用性
- **公開予定**: 24時間アクセス可能
- **メンテナンス**: 不定期（更新時のみ）
- **ホスティング**: Vercel（静的ホスティングサービス）

### 8.4 対応ブラウザ／デバイス
- **ブラウザ**:
  - Chrome（最新版）
  - Firefox（最新版）
  - Safari（最新版）
  - Edge（最新版）
- **デバイス**:
  - PC（デスクトップ）
  - タブレット（iPad等）
  - スマートフォン（iPhone、Android）
- **レスポンシブ対応**: Tailwind CSSによる完全レスポンシブデザイン

### 8.5 アクセシビリティ
- **画像のalt属性**: 全画像にalt属性を設定（代替テキスト）
- **カラーコントラスト**: テキストと背景の十分なコントラスト確保（青と白、黒の組み合わせ）
- **キーボード操作**: 主要な操作はキーボードでも可能
- **セマンティックHTML**: 適切なHTMLタグの使用

---

## 9. UI / デザイン指針

### 9.1 カラーパレット
- **基本3色**: 青 / 白 / 黒
- **メインカラー**: 青系（`#080eb4`）
- **背景色**: 白（`#ffffff`）、グレー（`#f3f4f6`）
- **テキスト**: ダークグレー（`#1f2937`、`#4b5563`）、黒
- **アクセントカラー**: ブルー（`#3b82f6`、`#2563eb`）
- **エラー・削除**: 赤（`#ef4444`）

### 9.2 フォント
#### 採用フォント
- **Megrim**: スタイリッシュなディスプレイフォント、見出し・ロゴ・タイトル・ボタン・フッターに使用
  - 細身でスタイリッシュな印象
  - モダンで洗練された雰囲気
  - 青/白/黒のカラーパレットに最適
  - クトゥルフTRPGの「ミステリアス」な雰囲気とマッチ
  - ウェイト：400
- **Zen Kaku Gothic Antique**: 日本語用、本文・説明文に使用
  - 落ち着いた雰囲気のあるゴシック体
  - 高い可読性で長文にも適している
  - 多様なウェイト（400/500/700/900）
  - Megrimとの組み合わせで、スタイリッシュさと落ち着きのバランスが取れる
  
#### フォントの使い分け
- **見出し（h1, h2）**: Megrim
- **サイドバーのボタン**: Megrim
- **フッターのリンクとコピーライト**: Megrim
- **本文・説明文**: Zen Kaku Gothic Antique（自動適用）
- **キャラクター名**: Zen Kaku Gothic Antique（ボールド）
- **詳細**: `FONT_GUIDE.md`を参照

#### 適用箇所
- **Megrim適用箇所**:
  - サイドバー: 「Menu」タイトル、ナビゲーションボタン（Top, About, Character, Log, Gallery, Search）
  - フッター: リンク、コピーライト
  - トップページ: 「ようこそ、混沌の円卓へ。」「やみなべの仲間たち」
  - 各ページの大見出し: About, Character, Gallery, Search, Log
- **Zen Kaku Gothic Antique適用箇所**:
  - 上記以外のすべての本文、説明文、キャラクター名、カード内テキスト

### 9.3 レイアウト
- **構造**: 左サイドバー固定（PC）+ メインコンテンツエリア
- **サイドバー幅**: 256px（`w-64`）
- **サイドバー（スマホ）**: 折りたたみハンバーガーメニューに切替
- **コンテンツエリア**: サイドバーを除いた残り部分
- **コンテナ**: 中央寄せ、最大幅制限あり（`container mx-auto`）

### 9.4 主要コンポーネント（UI要素）
- **カード**: 白背景、角丸、シャドウ（`rounded-lg shadow-md`）
- **ボタン**: 角丸、ホバーエフェクト、色で役割を区別
- **モーダル**: 中央表示、半透明背景、閉じるボタン
- **アコーディオン**: 豆知識用、クリックで展開/折りたたみ
- **ナビゲーション**: 左サイドバー固定、ホバーエフェクト

### 9.5 レスポンシブ方針
- **ブレークポイント**（Tailwind CSS標準）:
  - `sm`: 640px以上
  - `md`: 768px以上
  - `lg`: 1024px以上
  - `xl`: 1280px以上
- **サイドバー**: PCで常時表示、スマホで折りたたみハンバーガーメニュー
- **画像**: 幅100%で縮小可能

### 9.6 アニメーション方針
- **軽微なアニメーション**: ホバー時のトランジション、モーダルの表示/非表示
- **スムーススクロール**: スクロールトップボタン
- **初回訪問時のローディング**: ウェルカムメッセージ、ロゴ表示
- **画像ズーム**: ギャラリーのホバー時
- **提出版では軽めに**: パフォーマンスとユーザビリティを優先
- **将来的に追加**: フェードやスライドアニメーション（ページ遷移など）

---

## 10. 運用・管理フロー

### 10.1 コンテンツ更新方法
#### 現在の運用フロー（推奨）
1. 画像やデータをローカルで準備
2. `/data/characters.ts`または`/data/galleryImages.ts`を直接編集
3. 画像を`/public/images/`配下に配置
4. ローカルで動作確認（`npm run dev`または`yarn dev`）
5. GitHubリポジトリにcommit & push
6. Vercelが自動デプロイ
7. デプロイ後の動作確認

#### 担当者
- **自分一人**

### 10.2 バックアップの方法
- **Gitリポジトリ**: GitHubにプッシュすることでバックアップ
- **GitHubの履歴で復元可能**
- **画像ファイル**: 同様にGitで管理
- **重要ファイルはローカルにもバックアップ**
- **定期的なコミット**: 重要な変更時は必ずコミット

### 10.3 リリース（デプロイ）手順
1. ローカルで開発・テスト
2. `npm run build`（または`yarn build`）でビルドエラーがないか確認
3. Gitにコミット
4. GitHubにプッシュ
5. Vercelが自動でデプロイ
6. デプロイ後の動作確認（公開URLにアクセス）

### 10.4 更新頻度
- **現状**: 「1回作ったらほぼしない」とのこと
- **頻繁な更新がないならJSON（またはTypeScript）管理で問題なし**
- **将来的に更新頻度が増える場合**: CMS導入を検討

---

## 11. テスト・品質チェック項目

### 11.1 機能テスト（提出前チェック）
- [ ] トップページのランダム表示が正常に動作するか
- [ ] キャラクター一覧が全員表示されるか
- [ ] キャラクター詳細ページが正しく表示されるか（各項目）
- [ ] 画像が壊れていない、正しく表示されるか
- [ ] 検索機能が正常に動作するか（フリーワード検索、名前で結果を返す）
- [ ] 絞り込み機能が正常に動作するか（各項目）
- [ ] 並べ替え機能が正常に動作するか（各オプション）
- [ ] ギャラリーの画像が正しく表示されるか
- [ ] 画像クリックで拡大モーダルが開くか
- [ ] モーダルが正しく閉じるか
- [ ] 表情差分の切り替えが動作するか
- [ ] レーダーチャートが表示されるか
- [ ] 関連キャラリンクが正しく遷移するか
- [ ] サイドバーのリンクが全て正常に動作するか
- [ ] スクロールトップボタンが動作するか
- [ ] LINEログページが表示されるか
- [ ] Aboutページのアコーディオンが動作するか

### 11.2 表示テスト
- [ ] **PC（横幅大）での表示確認**
  - Chrome、Firefox、Safari、Edge
- [ ] **タブレットでの表示確認**
  - iPad、Android
- [ ] **スマートフォン（縦幅小）での表示確認（少なくとも崩れないこと）**
  - iPhone、Android
- [ ] 各画面サイズでレイアウトが崩れないか
- [ ] 画像が正しく表示されるか
- [ ] テキストが読みやすいか
- [ ] ボタンが押しやすいサイズか（モバイル）

### 11.3 ユーザビリティチェック
- [ ] ナビゲーションが直感的か
- [ ] 各ページへのアクセスが容易か
- [ ] 検索・絞り込み機能が使いやすいか
- [ ] モーダルの開閉が分かりやすいか
- [ ] エラーメッセージが適切か（該当する場合）

### 11.4 デプロイチェック
- [ ] ビルドエラーがないか（`npm run build`）
- [ ] Lintエラーがないか（`npm run lint`）
- [ ] Vercel上で公開URLにアクセスできること

### 11.5 提出用チェック
- [ ] ソースコード（GitHub リポジトリ）と公開URLを提出フォーマットに合わせる
- [ ] 公開URLが正常にアクセスできるか
- [ ] GitHubリポジトリのREADMEが整っているか
- [ ] 必要ならスクリーンショット（PC & スマホ）や簡単な操作説明（README）を添付
- [ ] リンク切れがないか
- [ ] 全ページの表示確認

---

## 12. スケジュール（マイルストーン）

### 締切目標
**2026年2月まで**（余裕を持って進めるプラン）

### 各フェーズの期限（提案）

#### フェーズ1: プロジェクト初期化・基本構造（〜1週間）
- [ ] プロジェクト初期化（Next.jsセットアップ）
- [ ] データ（JSON/TypeScript）作成
- [ ] 画像を `/public/images` に配置
- [ ] 基本ページ（一覧・個別）作成
- [ ] サイドバー・レイアウト実装

#### フェーズ2: 主要機能実装（次の1〜2週間）
- [ ] サーチ機能実装
- [ ] ギャラリーページ実装
- [ ] アバウト・ログページの整備
- [ ] 基本スタイル適用（カラーパレット、フォント）
- [ ] 絞り込み・並べ替え機能実装

#### フェーズ3: 最適化・調整（その後2週間）
- [ ] アニメーション追加（軽微なもの）
- [ ] アクセシビリティ対応（alt属性、コントラスト等）
- [ ] パフォーマンス最適化

#### フェーズ4: デプロイ・提出準備（最終2週間）
- [ ] Vercelへのデプロイ
- [ ] 全機能テスト
- [ ] 表示テスト（各デバイス、ブラウザ）
- [ ] 提出用ドキュメント作成（README、スクリーンショット）
- [ ] 最終チェック

### マイルストーン
- **MVP完成**: 2026年1月中旬
- **テスト・調整完了**: 2026年1月下旬
- **提出準備完了**: 2026年2月上旬
- **最終提出**: 2026年2月中旬

---

## 13. リスクと対策

### 想定される問題点と対応策

| リスク | 影響 | 対策 |
|--------|------|------|
| 画像サイズが大きく、表示が遅い | パフォーマンス低下 | Next.jsの`Image`コンポーネントで最適化、画像圧縮ツール（TinyPNG等）を使用 |
| データ管理が煩雑になる | 更新の手間増加 | 当面はJSON運用、将来的にCMSや管理画面の導入を検討 |
| モバイル表示でサイドバーが邪魔 | ユーザビリティ低下 | ハンバーガーメニューの実装 |
| キャラクター数が増えて検索が重くなる | パフォーマンス低下 | ページネーションや仮想スクロールの導入 |
| ブラウザ互換性の問題 | 一部ユーザーが閲覧できない | ポリフィル、ベンダープレフィックスの適用 |
| スケジュール遅延 | 提出期限に間に合わない | 余裕を持ったスケジュール設定、MVP優先で実装 |

### 代替案
- **データ管理**: 当面はJSON/TypeScriptファイル運用、将来的にCMS（Sanity、Contentful、Netlify CMS、Supabase等）導入を検討
- **検索機能**: 現在はクライアントサイド検索、将来的にサーバーサイド検索やAlgoliaの導入を検討
- **画像管理**: 現在はローカル保存（`/public/images/`）、将来的にCloudinaryやAWS S3の導入を検討

---

## 14. 提出物（評価者向け）

### 評価者に渡すもの
- [ ] **公開サイトのURL（Vercel）**
- [ ] **GitHub リポジトリのURL（ソースコード）**
- [ ] **README**（本ドキュメントを含めた簡潔な説明）
  - プロジェクト概要
  - 起動方法（ローカル環境）
  - 使用技術
  - 機能一覧
- [ ] **この仕様書**（PDF or Markdown）
- [ ] **スクリーンショット**（主要ページ、PC & スマホ）
- [ ] **使い方（簡単な操作説明）**
- [ ] **（任意）開発メモや設計図**（Figmaのリンクがあれば添付）

### 提出形式
- オンライン（URL共有）
- Markdown / PDF

---

## 15. 将来の拡張案（オプション）

### 機能追加の候補
- [ ] **管理画面**（簡易CMS）を導入して非エンジニアでも更新可能にする（Sanity / Netlify CMS / Supabaseなど）
- [ ] **タグ付けやフィルタ**を入れて検索性を改善
- [ ] **詳細なフルテキスト検索**
- [ ] **お気に入り機能**（LocalStorage）や「印刷用PDF出力」を追加して資料性を高める
- [ ] **作品ごとのバージョン管理（履歴）**を実装して設定変更の差分を追えるようにする
- [ ] **キャラクター間の相関図**
- [ ] **ユーザー登録・ログイン機能**（認証、編集権限管理）
- [ ] **コメント機能**（Disqus等）
- [ ] **ソーシャルシェア機能**
- [ ] **ダークモード**
- [ ] **多言語対応**（英語）
- [ ] **アニメーション強化**（ページ遷移など）
- [ ] **検索履歴の保存**
- [ ] **キャラクター比較機能**
- [ ] **タイムライン表示**（セッション履歴）
- [ ] **プッシュ通知**（新キャラクター追加時）

---

## 16. 用語集

| 用語 | 説明 |
|------|------|
| **TRPG** | テーブルトークロールプレイングゲームの略。会話とサイコロで進めるゲーム。 |
| **探索者（PC）** | プレイヤーが演じるキャラクター。Player Characterの略。 |
| **キーパー（KP）** | ゲームの進行役。Keeperの略。 |
| **SAN（正気度）** | キャラクターの精神的な健康度を表す数値。 |
| **セッション** | 1回のゲームプレイのこと。 |
| **シナリオ** | ゲームの物語・設定。 |
| **ルームログ** | セッション中の会話や出来事の記録。 |
| **MVP** | Minimum Viable Productの略。最低限の機能を持った製品。まず作る最小の形。 |
| **レスポンシブデザイン** | 画面サイズに応じてレイアウトが変わるデザイン。 |
| **モーダル** | 画面上に重ねて表示されるポップアップウィンドウ。 |
| **アコーディオン** | クリックで展開・折りたたみができるUI。 |
| **DB（データベース）** | データを保存する場所。現在は使用していない（JSON/TypeScriptファイル使用）。 |
| **CMS** | Content Management Systemの略。コンテンツ管理システム。 |
| **デプロイ** | サイトを公開サーバーにアップロードすること。 |
| **Vercel** | Next.jsの公式推奨ホスティングサービス。 |
| **ブレークポイント** | レスポンシブデザインで画面サイズによってレイアウトを切り替える基準となる幅。 |
| **ハンバーガーメニュー** | スマホでよく見る三本線のメニューボタン。 |

---

## 17. 画面ワイヤー（簡単な図）

（未作成）

Figmaやドローツールで作成すると、評価者に視覚的に伝わりやすくなります。

### 推奨ツール
- Figma（無料プランあり）
- Adobe XD
- Sketch
- 手書き（写真撮影）

---

## 18. サンプルデータ

### サンプルキャラクター（現在6人登録済み）
1. **高槻 隼人**（たかつき はやと）- 俳優、17歳
2. **大田 志音**（おおた しおん）- ミュージシャン、22歳
3. **志海 未來**（しうみ みく）- 俳優、23歳
4. **イフ**（いふ）- ハルモロイド、年齢不明
5. **姫島 ノエル**（ひめじま ノエル）- 小学生、10歳
6. **見酉 玲夜**（みとり れいや）- 高校生、17歳

### サンプルギャラリー画像（現在4枚登録済み）
1. サイトトップ画像
2. 志海未來
3. 高槻隼人「ずうっといっしょ！」パロ
4. 舞台の上

---

## 19. 参考URL / 参考資料

### 技術
- **Next.js公式ドキュメント**: https://nextjs.org/docs
- **Tailwind CSS公式ドキュメント**: https://tailwindcss.com/docs
- **TypeScript公式ドキュメント**: https://www.typescriptlang.org/docs/
- **Vercel公式ドキュメント**: https://vercel.com/docs


### フォント・カラー
- **Google Fonts**: https://fonts.google.com/（Noto Sans JP等）
- **カラーパレット**: Tailwind CSSのデフォルトカラー + カスタムカラー（青/白/黒）

---

## 20. 連絡先・プロジェクトメモ

### プロジェクト管理
- **リポジトリ**: （GitHubのURLを記載）
- **デプロイ先**: （VercelのURLを記載）
---

## 使用技術スタック

### フロントエンド
- **フレームワーク**: Next.js 15.4.5（App Router、React ベース）
- **言語**: TypeScript 5
- **UIライブラリ**: React 19.1.0
- **スタイリング**: Tailwind CSS 4（CSS Modules も選択可能）

### データ
- **現在**: TypeScriptファイル（`/data/characters.ts`, `/data/galleryImages.ts`）
- **推奨移行先**: JSON（`/data/characters.json`）

### 画像
- **現在**: `/public/images/`（ローカル保存）
- **将来的な選択肢**: Cloudinary、AWS S3等

### ツール
- **パッケージマネージャー**: npm / yarn
- **Linter**: ESLint
- **ビルドツール**: Next.jsの内蔵ビルドシステム
- **エディタ**: VS Code（導入済み）

### デプロイ
- **ホスティング**: Vercel（既にアカウントあり）
- **バージョン管理**: Git / GitHub（既に使用中）

### その他
- **画像最適化**: Next.js Image Component
- **HTML解析**: html-react-parser（LINEログ表示用）

---

## プロジェクト構成

```
yaminabe_new/
├── data/
│   ├── characters.ts        # キャラクターデータ（TypeScript）
│   └── galleryImages.ts     # ギャラリー画像データ（TypeScript）
├── public/
│   ├── images/              # キャラクター画像
│   │   ├── [キャラクター名]/
│   │   │   ├── 0.png        # 全身立ち絵
│   │   │   ├── 1.png        # 表情差分1
│   │   │   └── ...
│   │   └── ...
│   ├── gallery/             # ギャラリー画像
│   │   ├── 01.png
│   │   └── ...
│   ├── line-logs/           # LINEログHTML
│   │   ├── [キャラクター名]/
│   │   └── ...
│   └── rogo/                # ロゴ画像
│       └── chaos-yaminabe-logo.png
├── src/
│   ├── app/                 # Next.js App Router
│   │   ├── page.tsx         # トップページ
│   │   ├── layout.tsx       # 共通レイアウト
│   │   ├── globals.css      # グローバルCSS
│   │   ├── characters/      # キャラクター関連ページ
│   │   │   ├── page.tsx     # 一覧ページ
│   │   │   └── [characterId]/
│   │   │       └── page.tsx # 個別ページ
│   │   ├── gallery/         # ギャラリーページ
│   │   │   └── page.tsx
│   │   ├── search/          # 検索ページ
│   │   │   └── page.tsx
│   │   ├── about/           # Aboutページ
│   │   │   └── page.tsx
│   │   ├── line-log/        # LINEログページ
│   │   │   └── page.tsx
│   │   └── logs/            # ログ詳細ページ
│   ├── components/          # 共通コンポーネント
│   │   ├── Sidebar.tsx
│   │   ├── Footer.tsx
│   │   ├── ScrollToTop.tsx
│   │   ├── RadarChart.tsx
│   │   └── ...
│   └── lib/                 # ユーティリティ関数
├── package.json
├── tsconfig.json
├── next.config.ts
├── tailwind.config.ts
├── postcss.config.mjs
├── eslint.config.mjs
├── README.md
└── 仕様書.md               # この仕様書
```

---

## 終わりに

この仕様書は、**2025年度の課題提出**のための「やみなべっ！キャラクターアーカイブサイト」の全体像を把握し、開発・運用をスムーズに進めるためのドキュメントです。

**締切目標は2026年2月**ですので、余裕を持って計画的に進めていきましょう。

今後の機能追加や改善時にも、このドキュメントを参照・更新していくことで、プロジェクトの一貫性を保ちます。

### 次のステップ
1. スケジュールに沿って各フェーズを進める
2. 定期的にテスト・チェックを行う
3. 問題が発生したら早めに対策を講じる
4. 提出前に全項目のチェックリストを確認する

---

**作成日**: 2025年11月28日  
**最終更新日**: 2025年11月28日  
**バージョン**: 2.0.0  
**課題提出締切**: 2026年2月（予定）
